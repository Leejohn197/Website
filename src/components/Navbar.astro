---
// src/components/Navbar.astro
import LanguageSwitcher from './common/LanguageSwitcher.astro';
import { getLangFromUrl, useTranslations } from '../i18n/utils';

// 获取当前语言
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

// 根据语言生成导航链接
const navLinks = {
  home: `/${lang}/`,
  about: `/${lang}/about`,
  exhibitors: `/${lang}/exhibitors`,
  contact: `/${lang}/contact`
};

// 导航文本（多语言）
const navText = {
  en: {
    home: 'Home',
    about: 'About',
    exhibitors: 'Exhibitors',
    contact: 'Contact',
    bookStand: 'Book a Stand'
  },
  id: {
    home: 'Beranda',
    about: 'Tentang',
    exhibitors: 'Peserta Pameran',
    contact: 'Hubungi',
    bookStand: 'Pesan Stan'
  },
  zh: {
    home: '首页',
    about: '关于展会',
    exhibitors: '展商服务',
    contact: '联系我们',
    bookStand: '我要参展'
  }
};

const texts = navText[lang] || navText.en;
---

<nav class="fixed w-full z-50 top-0 start-0 border-b border-batik bg-white/95 backdrop-blur-md shadow-sm transition-all duration-300">
  <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4">
    
    <a href={navLinks.home} class="flex items-center space-x-2 rtl:space-x-reverse group">
        <!-- Logo 图标 (可选) -->
        <!-- <div class="w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center text-white font-bold">J</div> -->
        
        <span class="self-center text-2xl font-heading font-bold whitespace-nowrap text-primary-900 group-hover:text-primary-700 transition-colors">
          Jakarta<span class="text-red-600">Expo</span>
        </span>
    </a>

    <div class="flex md:order-2 space-x-3 md:space-x-4 rtl:space-x-reverse items-center">
        <!-- 语言切换器 -->
        <LanguageSwitcher />
        
        <!-- 分隔线 -->
        <div class="hidden md:block h-6 w-px bg-neutral-300"></div>
        
        <a href={navLinks.exhibitors} class="text-white bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5">
          {texts.bookStand}
        </a>
        <button data-collapse-toggle="navbar-sticky" type="button" class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-neutral-500 rounded-lg md:hidden hover:bg-neutral-100 focus:outline-none focus:ring-2 focus:ring-neutral-200" aria-controls="navbar-sticky" aria-expanded="false">
          <span class="sr-only">Open main menu</span>
          <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 17 14">
              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 1h15M1 7h15M1 13h15"/>
          </svg>
        </button>
    </div>

    <div class="items-center justify-between hidden w-full md:flex md:w-auto md:order-1" id="navbar-sticky">
      <ul class="flex flex-col p-4 md:p-0 mt-4 font-medium border border-neutral-100 rounded-lg bg-neutral-50 md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0 md:bg-white">
        <li>
          <a href={navLinks.home} class="block py-2 px-3 text-primary-700 bg-transparent rounded md:p-0 font-bold" aria-current="page">{texts.home}</a>
        </li>
        <li>
          <a href={navLinks.about} class="block py-2 px-3 text-neutral-700 rounded hover:bg-neutral-100 md:hover:bg-transparent md:hover:text-primary-600 md:p-0 transition-colors">{texts.about}</a>
        </li>
        <li>
          <a href={navLinks.exhibitors} class="block py-2 px-3 text-neutral-700 rounded hover:bg-neutral-100 md:hover:bg-transparent md:hover:text-primary-600 md:p-0 transition-colors">{texts.exhibitors}</a>
        </li>
        <li>
          <a href={navLinks.contact} class="block py-2 px-3 text-neutral-700 rounded hover:bg-neutral-100 md:hover:bg-transparent md:hover:text-primary-600 md:p-0 transition-colors">{texts.contact}</a>
        </li>
      </ul>
    </div>

  </div>
</nav>